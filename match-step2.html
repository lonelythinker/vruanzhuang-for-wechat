<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
		<meta name="format-detection" content="telephone=no">
		<meta content="email=no" name="format-detection" />
		<script type="text/javascript" src="js/app.js"></script>
		<script type="text/javascript" src="js/global.js"></script>
		<script type="text/javascript" src="js/mui.min.js"></script>
		<script type="text/javascript" src="js/vue.js"></script>
		<link rel="stylesheet" href="css/mui.min.css" />
		<link rel="stylesheet" href="css/app.css" />
		<link rel="stylesheet" href="css/match.css" />
		<title>微软装</title>
	</head>

	<body>
		<div id="load">
			<div class="loading"></div>
			<div class="loading-text"><img src="images/load.gif" width="25px">加载中，请稍候...</div>
		</div>
		<header class="mui-bar mui-bar-nav">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<a class="icon-left-nav mui-icon mui-pull-right skip" href="match-step3.html">跳过></a> </header>
		<div class="mui-content">
			<div class="title2">
				<p>请选择几个你喜欢的</p>装修风格</div>
			<div class="style-list">
				<div class="circle grid-1" onclick="selectstyle(this)"><span>现代</span></div>
				<div class="circle grid-2" onclick="selectstyle(this)"><span>简约</span></div>
				<div class="circle grid-3" onclick="selectstyle(this)"><span>欧式</span></div>
				<div class="circle grid-4" onclick="selectstyle(this)"><span>中式</span></div>
				<div class="circle grid-5" onclick="selectstyle(this)"><span>田园</span></div>
				<div class="circle grid-6" onclick="selectstyle(this)"><span>美式</span></div>
				<div class="circle grid-7" onclick="selectstyle(this)"><span>混搭</span></div>
			</div>

			<div class="title2">
				装修颜色</div>
			<div class="colorselect" id="colorlist">
				<span class="color" v-for="color in colors" id="{{color.color_id}}" data="{{color.color_code}}" onclick="selectcolor(this)">
					{{ color.color_name }}
				</span>
			</div>

			<div id="next-step">选好了，下一步></div>
		</div>

	</body>
	<script>
		var colorstyle = [{
			"color_name": "蓝",
			"color_id": 1,
			"color_code": "#B0E2FF"
		}, {
			"color_name": "绿",
			"color_id": 2,
			"color_code": "#BCEE68"
		}, {
			"color_name": "黄",
			"color_id": 3,
			"color_code": "#EEEE00"
		}, {
			"color_name": "橙",
			"color_id": 4,
			"color_code": "#EEAD0E"
		}, {
			"color_name": "红",
			"color_id": 5,
			"color_code": "#FF4500"
		}, {
			"color_name": "粉",
			"color_id": 6,
			"color_code": "#FFBBFF"
		}, {
			"color_name": "咖",
			"color_id": 7,
			"color_code": "#B8860B"
		}, {
			"color_name": "白",
			"color_id": 8,
			"color_code": "#F3F3F3"
		}, {
			"color_name": "灰",
			"color_id": 9,
			"color_code": "#E0E0E0"
		}];
		var colorselect = [];
		var styleid;
		mui.ready(function() {
			localStorage.removeItem('IC_color');
			localStorage.removeItem('IC_style');
			colorlist = new Vue({
				el: '#colorlist',
				data: {
					'colors': colorstyle
				}
			});
			changecolor();
		})
		document.getElementById('next-step').addEventListener('tap', function() {
			!styleid ? mui.alert('请选择风格', '微软装') : !colorselect.length ? mui.alert('请选择颜色', '微软装') : next();
		});

		function selectstyle(e) {
			borthers = e.parentNode.getElementsByClassName("circle");
			for (i = 0; i < borthers.length; i++) {
				borthers[i].getElementsByTagName("span")[0].style.backgroundColor = 'rgba(255,255,255,0.6)'
			}
			e.getElementsByTagName("span")[0].style.backgroundColor = 'rgba(255,255,255,0)'
			styleid = e.className.split("grid-")[1];
		}

		function selectcolor(e) {
			borthers = e.parentNode.getElementsByClassName("color");
			!e.style.border ? (e.style.border = '2px solid#0000EE', colorselect.push(e.id)) : (e.style.border = '', colorselect.remove(e.id))
		}

		function changecolor() {
			item = document.getElementsByClassName("color");
			for (var i = 0; i < item.length; i++) {
				item[i].style.backgroundColor = item[i].getAttribute('data');
			}
		}

		function next() {
			localStorage.IC_color = colorselect;
			localStorage.IC_style = styleid;
			location.href = "match-step3.html"
		}
	</script>

</html>